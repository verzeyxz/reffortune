/* --- THEME & BACKGROUND (เหมือนเดิม) --- */
body {
    font-family: 'Noto Sans Thai', sans-serif;
    background-color: #100a33;
    color: white;
    overflow-x: hidden;
}
.space-bg {
    background: radial-gradient(ellipse at bottom, #0f0755 0%, #100a33 100%);
}
.stars, .twinkling, .planet { position: fixed; top: 0; left: 0; right: 0; bottom: 0; }
.stars { background: transparent url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/1231630/stars.png) repeat top center; z-index: -3; }
.twinkling { background: transparent url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/1231630/stars.png) repeat top center; z-index: -2; animation: move-twinkle-back 200s linear infinite; }
.planet { width: 300px; height: 300px; background: radial-gradient(circle at 30% 30%, #a29bfe, #6c5ce77a, #2c2d84); border-radius: 50%; box-shadow: 0 0 40px #6c5ce77c, 0 0 80px #a29bfe, inset -20px -10px 40px #352c84; animation: pulse 6s infinite ease-in-out; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: -1; }
@keyframes move-twinkle-back { from { background-position: 0 0; } to { background-position: -10000px 5000px; } }
@keyframes pulse { 0%, 100% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.05); } }
.text-glow { text-shadow: 0 0 8px rgba(192, 132, 252, 0.6), 0 0 32px rgba(139, 92, 246, 0.4); }
.glass-box { background: rgba(141, 133, 172, 0.2); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); border-radius: 1rem; border: 1px solid rgba(255, 255, 255, 0.1); }

/* --- LAYOUT --- */
.main-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem 1rem;
    position: relative;
    z-index: 10;
}
.controls-container {
    position: sticky;
    top: 1rem;
    z-index: 20;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    margin-bottom: 2rem;
}

/* --- CARD GRID & STYLES --- */
.card-grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 1rem;
    perspective: 1000px;
}
.card-container {
    cursor: pointer;
    transition: transform 0.3s ease;
}
.card-container:hover {
    transform: scale(1.05);
}
.card-back {
    width: 100%;
    aspect-ratio: 2/3;
    background-image: url(https://z262998-h64m7.ls01.zwhhosting.com/card/Sp.png);
    background-size: cover;
    border-radius: 8px;
    border: 2px solid transparent;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
.card-container.selected .card-back {
    border-color: #C4B5FD;
    transform: translateY(-10px);
    box-shadow: 0 10px 20px rgba(196, 181, 253, 0.5);
}
/* --- UPDATED CONTROLS & NEW SELECTION TRAY --- */
.controls-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem 1.5rem; /* ปรับ Padding */
    margin-bottom: 2rem;
    position: sticky;
    top: 1rem;
    z-index: 20;
}

.selection-tray-container {
    position: relative;
    display: flex;
    align-items: center;
    height: 60px; /* กำหนดความสูงของถาด */
    flex-grow: 1; /* ให้ถาดขยายเต็มพื้นที่ */
}

.tray-card {
    position: absolute;
    width: 40px; /* ขนาดไพ่จิ๋ว */
    aspect-ratio: 2/3;
    background-image: url(https://i.postimg.cc/DZnx1m8c/tarot-cards-mystical-poster-meta.webp);
    background-size: cover;
    border-radius: 4px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.4);
    border: 1px solid rgba(255, 255, 255, 0.5);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    opacity: 0; /* เริ่มต้นให้โปร่งใส */
    transform: translateY(20px); /* เริ่มต้นให้อยู่ต่ำกว่าปกติเล็กน้อย */
}
/* ... All previous CSS code ... */

/* --- UPDATED RESULTS SCREEN STYLES --- */
#results-screen {
    /* เพิ่มพื้นหลังให้ส่วนนี้ เพื่อให้รูปที่ save ออกมาสวยงาม */
    background: rgba(15, 7, 85, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 1rem;
    padding: 2rem;
    backdrop-filter: blur(5px);
}
.results-grid-container {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: repeat(2, auto);
    gap: 1.5rem;
    max-width: 1000px;
    margin: 0 auto;
}

/* ... existing result-card styles ... */

/* --- NEW BUTTON STYLE for Saving --- */
.save-btn {
    background-color: #10B981; /* Green color */
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 9999px;
    font-weight: bold;
    border: none;
    transition: all 0.3s ease;
}
.save-btn:hover {
    background-color: #34D399;
    transform: scale(1.05);
}


/* Animation for when card is added to tray */
.tray-card.in-tray {
    opacity: 1;
    transform: translateY(0);
}

.tray-card:hover {
    transform: translateY(-5px) scale(1.1);
    z-index: 10; /* ทำให้ไพ่ที่ hover อยู่บนสุด */
}
/* --- CONTROLS --- */
.counter-text {
    font-size: 1.125rem;
    font-weight: bold;
    color: #E9D5FF;
}
.confirm-btn {
    background-color: #8B5CF6;
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 9999px;
    font-weight: bold;
    border: none;
    transition: all 0.3s ease;
}
.confirm-btn:hover:not(:disabled) {
    background-color: #A78BFA;
    transform: scale(1.05);
}
.confirm-btn:disabled {
    background-color: #4B5563;
    cursor: not-allowed;
    opacity: 0.7;
}

.results-grid-container {
    display: grid;
    /* สร้าง Grid 5 คอลัมน์ */
    grid-template-columns: repeat(5, 1fr);
    /* สร้าง Grid 2 แถว */
    grid-template-rows: repeat(2, auto);
    gap: 1.5rem;
    max-width: 1000px; /* จำกัดความกว้างสูงสุดบนจอใหญ่ */
    margin: 0 auto; /* จัดกลาง */
}

.result-card {
    text-align: center;
    animation: fadeIn 0.5s ease-out forwards;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.result-card:hover {
    transform: scale(1.07);
}

@keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

.result-card img {
    width: 100%;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.4);
}

.result-card p {
    margin-top: 0.75rem;
    font-weight: bold;
    color: #E9D5FF;
    font-size: 0.875rem; /* ลดขนาดตัวอักษรเล็กน้อย */
}

/* --- RESPONSIVE for 5x2 Grid --- */
@media (max-width: 640px) {
    .results-grid-container {
        gap: 0.75rem; /* ลดช่องว่างบนมือถือ */
    }
    .result-card p {
        font-size: 0.7rem; /* ลดขนาดตัวอักษรบนมือถือ */
        margin-top: 0.5rem;
    }
}

/* --- CARD DETAIL MODAL STYLES --- */
#card-modal-container.visible {
    opacity: 1;
    pointer-events: auto;
}
#card-modal-container.visible #card-modal-panel {
    transform: scale(1);
}